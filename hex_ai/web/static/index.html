<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hex AI Web UI</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div id="app-container">
    <div id="board-section">
      <h1>Hex AI</h1>
      <div id="status-line">Loading...</div>
      <div id="board-container"></div>
      <div id="controls">
        <button id="reset-btn">Reset</button>
        <button id="undo-btn">Undo Last Move</button>
        <button id="computer-toggle" class="btn-secondary" title="Toggle computer moves on/off for manual testing">Computer: ON</button>
        <button id="step-btn" class="btn-primary">Step (Computer Move)</button>
        <label for="auto-step-checkbox">Auto-step:</label>
        <input id="auto-step-checkbox" type="checkbox">
        <button id="save-game-btn" class="btn-primary">Save Game</button>
      </div>
      <div id="trmph-display">
        <span>TRMPH: <input id="trmph-string" type="text" readonly size="40"></span>
        <button id="copy-trmph">Copy</button>
      </div>
    </div>
    <div id="config-section">
      <!-- Computer Move Controls - Moved up since it's commonly used -->
      <div id="computer-move-controls" class="control-panel">
        <h3>Computer Move Settings</h3>
        <div class="player-settings">
          <div class="player-label">Blue:</div>

          <div class="mcts-row">
            <label for="blue-num-simulations">MCTS Simulations:</label>
            <input id="blue-num-simulations" type="number" value="2010" min="1" max="10000000" step="10">
            <label for="blue-exploration-constant">Exploration Constant:</label>
            <input id="blue-exploration-constant" type="number" value="2.95" min="0.1" max="5.0" step="0.1">
            <label for="blue-temperature">Temperature:</label>
            <input id="blue-temperature" type="number" value="0.18" min="0.1" max="5.0" step="0.1">
          </div>
          <div class="gumbel-row">
            <label for="blue-enable-gumbel">Enable Gumbel:</label>
            <input id="blue-enable-gumbel" type="checkbox" checked>
            <label for="blue-gumbel-max-sims">Max Sims for Gumbel:</label>
            <input id="blue-gumbel-max-sims" type="number" value="500" min="1" max="10000" step="10">
          </div>
        </div>
        <div class="player-settings">
          <div class="player-label">Red:</div>

          <div class="mcts-row">
            <label for="red-num-simulations">MCTS Simulations:</label>
            <input id="red-num-simulations" type="number" value="2010" min="1" max="10000000" step="10">
            <label for="red-exploration-constant">Exploration Constant:</label>
            <input id="red-exploration-constant" type="number" value="2.95" min="0.1" max="5.0" step="0.1">
            <label for="red-temperature">Temperature:</label>
            <input id="red-temperature" type="number" value="0.18" min="0.1" max="5.0" step="0.1">
          </div>
          <div class="gumbel-row">
            <label for="red-enable-gumbel">Enable Gumbel:</label>
            <input id="red-enable-gumbel" type="checkbox" checked>
            <label for="red-gumbel-max-sims">Max Sims for Gumbel:</label>
            <input id="red-gumbel-max-sims" type="number" value="500" min="1" max="10000" step="10">
          </div>
        </div>

      </div>
      
      <!-- TRMPH Sequence Input - More compact -->
      <div id="trmph-sequence-section" class="control-panel">
        <div class="trmph-header-row">
          <h3>Apply TRMPH Sequence</h3>
          <div class="trmph-button-row">
            <button id="apply-trmph-sequence" class="btn-primary">Apply Sequence</button>
            <button id="clear-trmph-sequence" class="btn-secondary">Clear</button>
          </div>
        </div>
        <div class="trmph-input-row">
          <label for="trmph-sequence-input">Paste TRMPH moves (e.g., "a1b2c3"):</label>
          <textarea id="trmph-sequence-input" placeholder="Paste TRMPH move sequence here..." rows="2" cols="50"></textarea>
        </div>
        <div id="trmph-sequence-status" class="status-message"></div>
      </div>
      
      <!-- Debug Controls -->
      <div id="debug-controls" class="control-panel">
        <h3>Debug & Diagnostics</h3>
        <div class="debug-row">
          <label for="verbose-level">Verbose Level:</label>
          <select id="verbose-level">
            <option value="0">None</option>
            <option value="1" selected>Basic</option>
            <option value="2">Detailed</option>
            <option value="3">Full</option>
          </select>
          <small>Level of debug output (0=none, 1=basic, 2=detailed, 3=full)</small>
        </div>
        <div class="debug-row">
          <label for="step-delay">Auto-step Delay (ms):</label>
          <input id="step-delay" type="number" value="0" min="0" max="5000" step="100">
          <small>Delay between auto-steps</small>
        </div>
      </div>
      
      <!-- Model Selection Controls - Moved to bottom -->
      <div id="model-controls" class="control-panel">
        <h3>Model Selection</h3>
        <div class="model-row">
          <label for="blue-model">Blue Player:</label>
          <select id="blue-model"></select>
          <button id="blue-model-browse" class="btn-secondary">Browse</button>
        </div>
        <div class="model-row">
          <label for="red-model">Red Player:</label>
          <select id="red-model"></select>
          <button id="red-model-browse" class="btn-secondary">Browse</button>
        </div>
      </div>
      
      <!-- Model Browser Modal -->
      <div id="model-browser-modal" class="modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Model Browser</h3>
            <span class="close">&times;</span>
          </div>
          <div class="modal-body">
            <!-- Recent Models Section -->
            <div class="browser-section">
              <h4>Recent Models</h4>
              <div id="recent-models-list" class="model-list"></div>
            </div>
            
            <!-- Search Section -->
            <div class="browser-section">
              <h4>Search Models</h4>
              <div class="search-controls">
                <input type="text" id="model-search" placeholder="Search by directory, filename, or path...">
                <button id="search-btn" class="btn-secondary">Search</button>
              </div>
              <div id="search-results" class="model-list"></div>
            </div>
            
            <!-- Directory Browser Section -->
            <div class="browser-section">
              <h4>Browse by Directory</h4>
              <div class="directory-controls">
                <select id="directory-select">
                  <option value="">Select directory...</option>
                </select>
                <button id="refresh-dirs-btn" class="btn-secondary">Refresh</button>
              </div>
              <div id="directory-models" class="model-list"></div>
            </div>
          </div>
          <div class="modal-footer">
            <button id="select-model-btn" class="btn-primary" disabled>Select Model</button>
            <button id="cancel-model-btn" class="btn-secondary">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Winner Selection Modal -->
    <div id="winner-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Game Not Finished</h3>
          <span class="close">&times;</span>
        </div>
        <div class="modal-body">
          <p>The game is not finished yet. Who won this game?</p>
          <div class="winner-buttons">
            <button id="winner-blue-btn" class="btn-primary">Blue Won</button>
            <button id="winner-red-btn" class="btn-primary">Red Won</button>
            <button id="winner-cancel-btn" class="btn-secondary">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Debug Output Section -->
    <div id="debug-output" class="debug-panel" style="display: none;">
      <h3>Debug Information</h3>
      <div id="debug-content"></div>
      
      <!-- Detailed MCTS Exploration Section -->
      <div id="detailed-exploration" style="display: none;">
                        <h4>Detailed MCTS Exploration (â‰¤47 simulations)</h4>
        <div id="exploration-content"></div>
      </div>
    </div>
  </div>
  <script src="/static/app.js"></script>
</body>
</html> 