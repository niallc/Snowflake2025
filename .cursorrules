# Snowflake2025 - Cursor Rules for AI Agents

## üö® CRITICAL: Environment Requirements

To get code and tests to work properly you'll need to:
1. **Virtual Environment**: Must be running in `hex_ai_env` virtual environment
2. **PYTHONPATH**: Must be set to include the project root (`.`)

## Principles
1. In general and throughout this project I prefer fail fast and catch bugs -- not fallback mechanisms. I'm very keen to avoid silent failures.

For more on the environment:
1. See `AGENT_GUIDANCE.md` for more setup instructions
2. Run `python scripts/validate_environment.py` to check setup
3. **Understand structure**: Review `scripts/agent_setup.py` for project overview

## üìÅ Project Structure

- `hex_ai/` - Core library modules (models, training, inference, etc.)
- `scripts/` - Entry point scripts (training, tournaments, self-play, data processing)
- `tests/` - Test suite
- `data/` - Game data
- `checkpoints/` - Model checkpoints
- `write_ups/technical_debt_tracker.md` - Known issues and cleanup tasks

## üéØ Main Entry Points

- **Training**: `scripts/hyperparam_sweep.py`
- **Tournaments**: `scripts/run_tournament.py`
- **Self-play**: `scripts/run_large_selfplay.py`
- **Data Processing**: `scripts/process_all_trmph.py`

## ‚ö†Ô∏è Important Patterns

### Environment Checks
Many scripts include environment validation:
```python
from hex_ai.system_utils import check_virtual_env
check_virtual_env("hex_ai_env")
```

**NEVER skip these checks!** They exist for a reason.

### Import Patterns
Imports should prefer using the `hex_ai.` prefix over e.g. ..
```python
from hex_ai.models import HexModel
from hex_ai.training_orchestration import run_hyperparameter_tuning_current_data
```

### Testing
Tests must be run with PYTHONPATH set:
```bash
PYTHONPATH=. pytest tests/
```

## üìù Code Style Guidelines

1. **Use type hints** - Most functions have type annotations
2. **Add docstrings** - Follow existing documentation style